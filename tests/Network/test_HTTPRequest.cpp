//
// Created by Sam on 10/7/2017.
//

#include "../../../build/catch-src/include/catch.hpp"
#include "../../include/Network/HTTPRequest.h"


TEST_CASE("Simple HTTP GET Request")
{
    std::string expectedResult = "{\n"
            "\t\"response\": {\n"
            "\t\t\"error\": {\n"
            "\t\t\t\"errorcode\": 101,\n"
            "\t\t\t\"errordesc\": \"Invalid ticket\"\n"
            "\t\t}\n"
            "\t}\n"
            "}";
    std::string result = HTTPRequest::makeGETRequest("https://api.steampowered.com/ISteamUserAuth/AuthenticateUserTicket/v1/?key=86E46A5E8C8A6D7DAEADFF7875D94D2B&appid=480&ticket=14000000958A0F0E5363DAA370A9EB03010010013210935A18000000010000000200000065801B41000000005D3D9A0008000000B2000000320000000400000070A9EB0301001001E001000065801B416F00A8C0000000003210935AB2BFAE5A01000000000000000000A839C25A1FF27E0ED58D7418C7D169C06736823F7811AC9D7D73A7DE3EA7D2E32D95BD307DEFFD9A18CC36E0C85D67A148717220DDE1B4F587CD604E6E6D36A47BF4AEA443BA832CA000E16664E4338278354FA91E74EFCB00AD61D188FF372D4FABD55987A5E37E1B9562D3A5AFBB281C4FD5962A32213869990DE25FB7882E0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000430000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000343738393739353434220A09097D0A090922383032303733313939220A09097B0A090909226D616E69666573742209092233323333383530323334303131323931363234");

    REQUIRE(result == expectedResult);
}
